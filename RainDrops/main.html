<!-- // main for a image gallery which will display images from a local file  -->
<!-- // new images will transition in from the top, like rain drops  and old ones should transtion out -->
<!-- Philip Ong   Jan 23,2017-->
<!DOCTYPE html>
<html>
<head>
	<title>rain drops page </title>
	<link rel="stylesheet" href="style.css">
	<script src='jquery-3.1.1.min.js'></script>
	<!-- using this transit library will result in better for bright sign performace  -->
	<script src='jquery.transit.js'></script>
	<script src='functions.js'></script>
</head>

<body>
	
	<div id="main-container">
	
		<div id="Centre-container">
		<!-- drop -->
		<!-- middle left -->
			<img id="centreImg6" class="Middle" src="http://192.168.2.239/RoyalityFree/01.jpg" alt="" >
		<!-- middle -->
			<img id="centreImg5" class="Middle" src="http://192.168.2.239/RoyalityFree/02.jpg" alt="" >
		<!-- top right -->
			<img id="centreImg4" class="Middle" src="http://192.168.2.239/RoyalityFree/03.jpg" alt="">
		
		<!-- fade1 -->
		<!-- middle left -->
			<img id="centreImg3" class="Middle" src="http://192.168.2.239/RoyalityFree/04.jpg" alt="" >
		<!-- middle -->
			<img id="centreImg2" class="Middle" src="http://192.168.2.239/RoyalityFree/05.jpg" alt="" >
		<!-- top right -->
			<img id="centreImg1" class="Middle" src="http://192.168.2.239/RoyalityFree/06.jpg" alt="" >
			
		<!-- fade2 -->
		<!-- middle left -->
			<!-- <img id="centreImg7" src="http://192.168.2.239/RoyalityFree/07.jpg" alt="" -->
			<!-- style="position:absolute; top:500px; left:20px; width:600px; height:300px;" > -->
		<!-- middle -->
			<!-- <img id="centreImg8"  src="http://192.168.2.239/RoyalityFree/08.jpg" alt=""  -->
			<!-- style="position:absolute; top:450px; left:500px; width:600px; height:300px;" > -->
		<!-- top right -->
			<!-- <img id="centreImg9" src="http://192.168.2.239/RoyalityFree/09.jpg" alt=""  -->
			<!-- style="position:absolute; top:300px; left:1000px; width:600px; height:300px;" > -->
		<!-- overlay -->	
			<img id="overlay2" class="overlay" src="mask.png" >
			
		</div>
		
	</div>
	

	<script id= 'code'>
	{
		//the start up function 
		$(function (){
			console.log("initializing");

			// preloading the images 
			for(i = 0; i < imgArray.length; i++){
				var url = imgArray[i],
					img = new Image(960, 540);
		 
				img.src = url;
			};  
			setTimeout(FadeTransition, 1000);
		});
		
		var imgPath  = "http://192.168.2.239/RoyalityFree/";
		var totalDuration = 6000; //total time between slides 
		var transitDuration = 6000; //the duration for the transition 
		var waitDuration = 2000; //the duration for the wait between transition 
		var TransitionState=0;
		var xLeftPos = -500;
		var xRightPos = 500;
		var yTargetPos = 100;
		var yTargetPos2 = 200;
		
		
		var currentImg=0;
		var maxImages=15;
		var imgArray = 
			[	imgPath+"01.jpg",
				imgPath+"02.jpg",
				imgPath+"03.jpg",
				imgPath+"04.jpg",
				imgPath+"05.jpg",
				imgPath+"06.jpg",
				imgPath+"07.jpg",
				imgPath+"08.jpg",
				imgPath+"09.jpg",
				imgPath+"10.jpg",
				imgPath+"11.jpg",
				imgPath+"12.jpg",
				imgPath+"13.jpg",
				imgPath+"14.jpg",
				imgPath+"15.jpg"
			];
		var xOffset = [-50,50];
		var Angle1 = [-15,15];
		var Angle2 = [-15,15];
		var Angle3 = [-15,15];
		
		<!----- Main function reccursively calling itself   --->
		function FadeTransition()
		{
			DropIn();
			DropOut1();
			NextImage();
			
			<!----- change to for loop --->
			if (TransitionState == 2)
				TransitionState = 0;	
			else 
				TransitionState = Math.min(TransitionState+1, 2);
			
			setTimeout(FadeTransition,totalDuration);
		}
		
		<!----- Transition in for the new images  --->
		function DropIn()
		{
			if (TransitionState == 0)
			{
				ChangeImg('#centreImg3',imgArray[currentImg]);
				rainDropTransition('#centreImg3',xLeftPos,yTargetPos2,15,3000,0);
			}
			else if (TransitionState == 1)
			{
				ChangeImg('#centreImg2',imgArray[currentImg]);
				rainDropTransition('#centreImg2',0,yTargetPos,-10,3000,0);
			}
			else if (TransitionState == 2)
			{
				ChangeImg('#centreImg1',imgArray[currentImg]);
				rainDropTransition('#centreImg1',xRightPos,0,-35,3000,0);
			}
			
		}		
		
		<!----- Setup Transition out for the old images  --->
		function DropOut1()
		{
			var tempImage=returnPreviousInt();
			
			if (TransitionState == 0)
			{
				ChangeImg('#centreImg6',imgArray[tempImage]);
				SetPosition('#centreImg6',xLeftPos,yTargetPos2,15,0);
			}
			else if (TransitionState == 1)
			{
				ChangeImg('#centreImg5',imgArray[tempImage]);
				SetPosition('#centreImg5',0,yTargetPos,-10,0);
			}
			else if (TransitionState == 2)
			{
				ChangeImg('#centreImg4',imgArray[tempImage]);
				SetPosition('#centreImg4',xRightPos,0,-35,0);
			}
			setTimeout(DropOut2,4000);<!----- Call this transition causes lagg on XD233 --->
		}
		
		<!----- Transition out for the old images ,causes lagg on XD233 --->
		function DropOut2()
		{
			if (TransitionState == 1)
			{
				outTransition('#centreImg6',xLeftPos,yTargetPos2,15,3000,0);
			}
			else if (TransitionState == 2)
			{
				outTransition('#centreImg5',0,yTargetPos,-10,3000,0);
			}
			else if (TransitionState == 0)
			{
				outTransition('#centreImg4',xRightPos,0,-35,3000,0);
			}
		}
		
		
		function returnPreviousInt()
		{
			if (currentImg-3<0)
			{
			<!-- when the new number will be less than 0 -->
				return maxImages + (currentImg-3);
			}
			else 
			{
				return currentImg-3;
			}
		}
		
		//the next image in the list 
		function NextImage()
		{
			var previousImg_i = currentImg;
			if (currentImg == maxImages)
				currentImg = 0;	
			else 
				currentImg = Math.min(currentImg+1, maxImages);

			if (currentImg==0)
			{
				// preloading the images 
				for(i = 0; i < imgArray.length; i++){
					var url = imgArray[i],
						img = new Image(960, 540);
			 
					img.src = url;
				};  
			}
		}
		
	}
	</script>
</body>

</html>